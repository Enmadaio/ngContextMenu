/*! ng-contextmenu by Adam Timberlake <adam.timberlake@gmail.com> created on 2014-09-07 */
!function(a){"use strict";var b=a.module("ngContextMenu",[]);b.factory("contextMenu",function(){var a={};return a.cancelIteration=1,a.attachedClick=!1,a.cancelAll=function(){a.cancelIteration++},a}),b.directive("contextMenu",["$window","$http","$interpolate","$compile","$templateCache","contextMenu",function(b,c,d,e,f,g){return{restrict:"EA",require:"ngModel",scope:{include:"@contextMenu",model:"=ngModel"},controller:["$scope",function(a){a.template="",a.menu=null,a.throwException=function(a){throw"ngContextMenu: "+a+"."},a.cacheTemplate=function(b,e){c.get(b,{cache:f}).then(function(b){a.template=d(b.data)(e)}).catch(function(){a.throwException('Invalid context menu path: "'+b+'"')})},a.cancel=function(){a.menu&&a.menu.remove()}}],link:function(c,d){if(!g.attachedClick){var f=a.element(b.document.getElementsByTagName("html"));g.attachedClick=!0,f.bind("click",function(){c.$apply(g.cancelAll)})}c.cacheTemplate(c.include,c.model),c.$watch(function(){return g.cancelIteration},c.cancel),d.bind("contextmenu",function(b){c.$apply(function(){g.cancelAll()}),b.preventDefault();var f=e(c.template)(c.model);f.length>1&&c.throwException("Context menu is adding "+f.length+" immediate children"),d.append(f);var h=d[0],i=h.childNodes.length;c.menu=a.element(h.childNodes[i-1]),c.menu.css({top:b.clientY+"px",left:b.clientX+"px"})})}}}])}(window.angular);