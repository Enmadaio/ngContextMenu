/*! ng-contextmenu by Adam Timberlake <adam.timberlake@gmail.com> created on 2014-09-10 */
!function(a){"use strict";var b=a.module("ngContextMenu",[]);b.factory("contextMenu",function(){var a={};return a.cancelIteration=1,a.attachedClick=!1,a.cancelAll=function(){a.cancelIteration++},a}),b.directive("contextMenu",["$window","$http","$interpolate","$compile","$templateCache","contextMenu",function(b,c,d,e,f,g){return{restrict:"EA",require:"?ngModel",scope:{include:"@contextMenu",model:"=ngModel"},controller:["$scope",function(a){a.template="",a.event=null,a.menu=null,a.throwException=function(a){throw"ngContextMenu: "+a+"."},a.cacheTemplate=function(b){c.get(b,{cache:f}).then(function(b){a.template=b.data}).catch(function(){a.throwException('Invalid context menu path: "'+b+'"')})},a.cancelOne=function(){a.menu&&(a.menu.remove(),a.event=null)}}],link:function(c,e){if(!g.attachedClick){var f=a.element(b.document.getElementsByTagName("html"));g.attachedClick=!0,f.bind("click",function(){c.$apply(g.cancelAll)})}c.cacheTemplate(c.include,c.model||{}),c.$watch(function(){return g.cancelIteration},c.cancelOne),c.render=function(b){if(b){b.preventDefault();var f=$compiled(c.template)(c.model||{}),g=d(f)(c.model||{}),h=angular.element(g);h.length>1&&c.throwException("Context menu is adding "+h.length+" child nodes"),e.append(h);var i=e[0],j=i.childNodes.length;c.menu=a.element(i.childNodes[j-1]);var k="translate("+b.clientX+"px, "+b.clientY+"px)";c.menu.css({transform:k}),c.event=b}},e.bind("contextmenu",function(a){c.$apply(function(){g.cancelAll()}),c.render(a)}),c.model&&c.$watch("model",function(){var a=c.event;c.cancelOne(),c.render(a)},!0)}}}])}(window.angular);